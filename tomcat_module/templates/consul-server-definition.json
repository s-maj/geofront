[
   {
      "essential":true,
      "cpu":100,
      "memory":256,
      "image":"${container_version}",
      "name":"${container_name}",
      "mountPoints":[
         {
            "containerPath":"/consul/data",
            "sourceVolume":"consuldata",
            "readOnly":false
         },
         {
            "containerPath":"/consul/config",
            "sourceVolume":"consulconfig",
            "readOnly":false
         }
      ],
      "portMappings":[
         {
            "containerPort":8300,
            "hostPort":8300,
            "protocol":"tcp"
         },
         {
            "containerPort":8301,
            "hostPort":8301,
            "protocol":"tcp"
         },
         {
            "containerPort":8301,
            "hostPort":8301,
            "protocol":"udp"
         },
         {
            "containerPort":8302,
            "hostPort":8302,
            "protocol":"tcp"
         },
         {
            "containerPort":8302,
            "hostPort":8302,
            "protocol":"udp"
         },
         {
            "containerPort":8400,
            "hostPort":8400,
            "protocol":"tcp"
         },
         {
            "containerPort":8500,
            "hostPort":8500,
            "protocol":"tcp"
         },
         {
            "containerPort":8600,
            "hostPort":8600,
            "protocol":"tcp"
         },
         {
            "containerPort":8600,
            "hostPort":8600,
            "protocol":"udp"
         }
      ],
      "command":[
        "agent",
        "-server",
        "-domain=${domain}",
        "-datacenter=${datacenter}",
        "-bootstrap-expect=${nodes_number}",
        "-retry-join-ec2-tag-key=${ec2_tag_key}",
        "-retry-join-ec2-tag-value=${ec2_tag_value}",
        "-retry-join",
        "-retry-interval=15",
        "-data-dir=/consul/data",
        "-config-dir=/consul/config",
        "-log-level=debug"
      ],
      "environment": [
        {
          "name": "CONSUL_LOCAL_CONFIG",
          "value": "{\"leave_on_terminate\": true, \"encrypt\": \"${encrypt_key}\"}"
        },
        {
          "name": "CONSUL_BIND_INTERFACE",
          "value": "eth0"
        },
        {
          "name": "CONSUL_CLIENT_INTERFACE",
          "value": "eth0"
        }
      ]
   }
]
